import{a as c}from"./index-DT9TBuYH.js";import{r as v,h as f,c as g,a as m,b as a,w as o,d as _,o as V,f as x,M as S}from"./index-DNqqV_T_.js";const y={class:"settings"},w={style:{"margin-top":"24px"}},M={__name:"Settings",setup(U){const e=v({auto_backup_enabled:!1,auto_backup_interval:24,auto_lock_enabled:!0,auto_lock_timeout:15}),p=async()=>{var s,t,r,l;try{const u=(await c.getSettings()).data.data;e.value={auto_backup_enabled:((s=u.auto_backup_enabled)==null?void 0:s.value)==="true",auto_backup_interval:parseInt(((t=u.auto_backup_interval)==null?void 0:t.value)||24),auto_lock_enabled:((r=u.auto_lock_enabled)==null?void 0:r.value)==="true",auto_lock_timeout:parseInt(((l=u.auto_lock_timeout)==null?void 0:l.value)||15)}}catch(d){console.error(d)}},b=async()=>{try{await c.updateSettings({auto_backup_enabled:e.value.auto_backup_enabled.toString(),auto_backup_interval:e.value.auto_backup_interval.toString(),auto_lock_enabled:e.value.auto_lock_enabled.toString(),auto_lock_timeout:e.value.auto_lock_timeout.toString()}),S.success("保存成功")}catch(s){console.error(s)}};return f(()=>{p()}),(s,t)=>{const r=_("t-switch"),l=_("t-form-item"),d=_("t-input-number"),u=_("t-form"),i=_("t-card"),k=_("t-button");return V(),g("div",y,[t[5]||(t[5]=m("h1",null,"系统设置",-1)),a(i,{title:"自动备份",style:{"margin-top":"24px"}},{default:o(()=>[a(u,null,{default:o(()=>[a(l,{label:"启用自动备份"},{default:o(()=>[a(r,{modelValue:e.value.auto_backup_enabled,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value.auto_backup_enabled=n)},null,8,["modelValue"])]),_:1}),a(l,{label:"备份间隔（小时）"},{default:o(()=>[a(d,{modelValue:e.value.auto_backup_interval,"onUpdate:modelValue":t[1]||(t[1]=n=>e.value.auto_backup_interval=n),min:1,max:168},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(i,{title:"自动锁定",style:{"margin-top":"24px"}},{default:o(()=>[a(u,null,{default:o(()=>[a(l,{label:"启用自动锁定"},{default:o(()=>[a(r,{modelValue:e.value.auto_lock_enabled,"onUpdate:modelValue":t[2]||(t[2]=n=>e.value.auto_lock_enabled=n)},null,8,["modelValue"])]),_:1}),a(l,{label:"锁定超时（分钟）"},{default:o(()=>[a(d,{modelValue:e.value.auto_lock_timeout,"onUpdate:modelValue":t[3]||(t[3]=n=>e.value.auto_lock_timeout=n),min:1,max:60},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m("div",w,[a(k,{theme:"primary",onClick:b},{default:o(()=>[...t[4]||(t[4]=[x("保存设置",-1)])]),_:1})])])}}};export{M as default};
