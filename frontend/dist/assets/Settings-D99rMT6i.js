import{B,j as I,r as b,c as w,a as s,b as e,d as l,w as a,x as d,l as M,e as F,o as V,f as c,M as m}from"./index-DNqqV_T_.js";import{c as j}from"./index-DT9TBuYH.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"settings-page"},G={class:"header"},H={class:"header-content"},J={class:"settings-content"},K={class:"setting-section"},O={class:"section-title"},Q={class:"setting-card"},R={class:"setting-item"},W={class:"setting-section"},X={class:"section-title"},Y={class:"setting-card"},Z={class:"setting-item"},tt={class:"setting-section"},st={class:"section-title"},et={class:"setting-card"},ot={class:"setting-section"},lt={class:"section-title"},nt={class:"setting-card"},it={class:"setting-item"},at={key:0,class:"setting-item sub-item"},dt={style:{display:"flex","align-items":"center",gap:"8px"}},ut={class:"setting-item"},rt={class:"setting-section"},mt={class:"section-title"},vt={__name:"Settings",setup(ct){const{locale:h}=B(),n=I(),v=b(!1),u=b({oldPassword:"",newPassword:"",hint:""}),C=i=>{n.setTheme(i),m.success("主题已更新")},k=i=>{n.setLanguage(i),h.value=i,m.success("语言已更新")},x=()=>{m.success("设置已更新")},y=()=>{m.success("自动锁定时间已更新")},P=()=>{v.value=!0},L=async()=>{try{(await j.changeMasterPassword(u.value)).data.success&&(m.success("密码修改成功"),v.value=!1,n.lock())}catch(i){console.error("Change password failed:",i)}};return(i,t)=>{const r=l("t-icon"),p=l("t-radio-button"),U=l("t-radio-group"),f=l("t-option"),A=l("t-select"),$=l("t-switch"),N=l("t-input-number"),S=l("t-divider"),T=l("t-button"),g=l("t-input"),_=l("t-form-item"),E=l("t-form"),z=l("t-dialog");return V(),w("div",D,[s("div",G,[s("div",H,[s("div",{class:"back-btn",onClick:t[0]||(t[0]=o=>i.$router.push("/"))},[e(r,{name:"chevron-left",size:"20px"}),t[11]||(t[11]=s("span",null,"返回",-1))]),t[12]||(t[12]=s("h1",null,"设置",-1))])]),s("div",J,[s("div",K,[s("div",O,[e(r,{name:"palette"}),t[13]||(t[13]=s("span",null,"外观",-1))]),s("div",Q,[s("div",R,[t[17]||(t[17]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"主题模式"),s("div",{class:"item-desc"},"选择您喜欢的主题")],-1)),e(U,{modelValue:d(n).theme,"onUpdate:modelValue":t[1]||(t[1]=o=>d(n).theme=o),onChange:C,variant:"default-filled"},{default:a(()=>[e(p,{value:"light"},{default:a(()=>[...t[14]||(t[14]=[c("浅色",-1)])]),_:1}),e(p,{value:"dark"},{default:a(()=>[...t[15]||(t[15]=[c("深色",-1)])]),_:1}),e(p,{value:"auto"},{default:a(()=>[...t[16]||(t[16]=[c("自动",-1)])]),_:1})]),_:1},8,["modelValue"])]),s("div",{class:"setting-item",onClick:t[2]||(t[2]=o=>i.$router.push("/theme-custom")),style:{cursor:"pointer"}},[t[18]||(t[18]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"主题定制"),s("div",{class:"item-desc"},"自定义主题颜色和样式")],-1)),e(r,{name:"chevron-right",size:"20px",style:{color:"var(--td-text-color-placeholder)"}})])])]),s("div",W,[s("div",X,[e(r,{name:"translate"}),t[19]||(t[19]=s("span",null,"语言",-1))]),s("div",Y,[s("div",Z,[t[20]||(t[20]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"界面语言"),s("div",{class:"item-desc"},"选择显示语言")],-1)),e(A,{modelValue:d(n).language,"onUpdate:modelValue":t[3]||(t[3]=o=>d(n).language=o),onChange:k,style:{width:"150px"}},{default:a(()=>[e(f,{value:"zh-CN",label:"简体中文"}),e(f,{value:"en-US",label:"English"})]),_:1},8,["modelValue"])])])]),s("div",tt,[s("div",st,[e(r,{name:"code"}),t[21]||(t[21]=s("span",null,"开发者",-1))]),s("div",et,[s("div",{class:"setting-item",onClick:t[4]||(t[4]=o=>i.$router.push("/api-keys")),style:{cursor:"pointer"}},[t[22]||(t[22]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"API密钥管理"),s("div",{class:"item-desc"},"管理用于第三方集成的API密钥")],-1)),e(r,{name:"chevron-right",size:"20px",style:{color:"var(--td-text-color-placeholder)"}})])])]),s("div",ot,[s("div",lt,[e(r,{name:"lock-on"}),t[23]||(t[23]=s("span",null,"安全",-1))]),s("div",nt,[s("div",it,[t[24]||(t[24]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"自动锁定"),s("div",{class:"item-desc"},"闲置后自动锁定应用")],-1)),e($,{modelValue:d(n).autoLockEnabled,"onUpdate:modelValue":t[5]||(t[5]=o=>d(n).autoLockEnabled=o),onChange:x},null,8,["modelValue"])]),d(n).autoLockEnabled?(V(),w("div",at,[t[26]||(t[26]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"锁定时间"),s("div",{class:"item-desc"},"闲置多久后自动锁定")],-1)),s("div",dt,[e(N,{modelValue:d(n).autoLockTimeout,"onUpdate:modelValue":t[6]||(t[6]=o=>d(n).autoLockTimeout=o),min:1,max:60,onChange:y,style:{width:"100px"}},null,8,["modelValue"]),t[25]||(t[25]=s("span",{class:"unit-text"},"分钟",-1))])])):M("",!0),e(S),s("div",ut,[t[28]||(t[28]=s("div",{class:"item-info"},[s("div",{class:"item-label"},"修改主密码"),s("div",{class:"item-desc"},"更改您的主密码")],-1)),e(T,{theme:"default",variant:"outline",onClick:P},{default:a(()=>[...t[27]||(t[27]=[c(" 修改密码 ",-1)])]),_:1})])])]),s("div",rt,[s("div",mt,[e(r,{name:"info-circle"}),t[29]||(t[29]=s("span",null,"关于",-1))]),t[30]||(t[30]=F('<div class="setting-card" data-v-079dbc18><div class="setting-item" data-v-079dbc18><div class="item-info" data-v-079dbc18><div class="item-label" data-v-079dbc18>版本信息</div><div class="item-desc" data-v-079dbc18>2FA Authenticator v2.3</div></div></div></div>',1))])]),e(z,{visible:v.value,"onUpdate:visible":t[10]||(t[10]=o=>v.value=o),header:i.$t("auth.changeMasterPassword"),width:"500px",onConfirm:L},{default:a(()=>[e(E,{data:u.value},{default:a(()=>[e(_,{label:"旧密码"},{default:a(()=>[e(g,{modelValue:u.value.oldPassword,"onUpdate:modelValue":t[7]||(t[7]=o=>u.value.oldPassword=o),type:"password"},null,8,["modelValue"])]),_:1}),e(_,{label:"新密码"},{default:a(()=>[e(g,{modelValue:u.value.newPassword,"onUpdate:modelValue":t[8]||(t[8]=o=>u.value.newPassword=o),type:"password"},null,8,["modelValue"])]),_:1}),e(_,{label:"密码提示"},{default:a(()=>[e(g,{modelValue:u.value.hint,"onUpdate:modelValue":t[9]||(t[9]=o=>u.value.hint=o),placeholder:"可选"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])])}}},ft=q(vt,[["__scopeId","data-v-079dbc18"]]);export{ft as default};
