import{h as Oe,i as je,j as gt,r as d,k as B,c as m,a,l as y,b as l,d as b,m as D,w as i,t as v,F as P,g as G,M as r,u as _t,n as yt,o as c,f as z,p as ge,q as oe,s as ht,D as bt}from"./index-DNqqV_T_.js";import{s as I,u as kt,q as wt,b as Re,t as Me}from"./index-DT9TBuYH.js";import{_ as xt}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ct(g){const R=u=>{var $,U,K,L,k,M;if((u.ctrlKey||u.metaKey)&&u.key==="k"&&(u.preventDefault(),($=g.onSearch)==null||$.call(g)),(u.ctrlKey||u.metaKey)&&u.key==="n"&&(u.preventDefault(),(U=g.onNew)==null||U.call(g)),(u.ctrlKey||u.metaKey)&&u.key==="s"&&(u.preventDefault(),(K=g.onSave)==null||K.call(g)),(u.ctrlKey||u.metaKey)&&u.key==="l"&&(u.preventDefault(),(L=g.onLock)==null||L.call(g)),u.key==="Escape"&&((k=g.onEscape)==null||k.call(g)),/^[1-9]$/.test(u.key)&&(u.ctrlKey||u.metaKey)){u.preventDefault();const V=parseInt(u.key)-1;(M=g.onQuickCopy)==null||M.call(g,V)}};Oe(()=>{document.addEventListener("keydown",R)}),je(()=>{document.removeEventListener("keydown",R)})}const Dt={class:"home"},zt={class:"header"},Vt={class:"header-container"},St={class:"header-left"},Tt={class:"brand-logo"},Lt={class:"logo-icon"},Ut={class:"header-right"},At={class:"user-name"},Ft={class:"header-center"},$t={key:0,class:"batch-toolbar"},Et={class:"batch-toolbar-left"},It={class:"selected-count"},Rt={class:"batch-toolbar-right"},Mt={class:"main-content"},Ot={key:0,class:"favorites-bar"},jt={class:"favorites-header"},Bt={class:"favorites-list"},Kt=["onClick","title"],qt={class:"favorite-info"},Nt={class:"favorite-name"},Pt={class:"favorite-token"},Gt={key:1,class:"empty-state"},Jt={class:"empty-icon"},Qt={class:"empty-title"},Wt={class:"empty-desc"},Ht={key:3,class:"table-container desktop-view"},Xt={class:"secret-table"},Yt={key:0,class:"checkbox-col"},Zt={key:0,class:"checkbox-cell"},ea={class:"icon-cell"},ta={class:"name-cell"},aa={class:"name-wrapper"},sa={class:"secret-name"},oa={class:"issuer-cell"},la={class:"issuer"},na={class:"note-cell"},ia=["title"],ra={class:"secret-key-cell"},ca={class:"secret-key-wrapper"},ua={class:"secret-key-text"},da={class:"secret-key-actions"},va={class:"code-cell"},ma=["onClick","title"],pa={class:"timer-cell"},fa={class:"timer-wrapper"},ga={class:"timer-text"},_a={class:"action-cell"},ya={key:1,style:{color:"#999"}},ha={key:4,class:"mobile-view"},ba={class:"mobile-card-header"},ka={class:"mobile-card-title"},wa={class:"mobile-name"},xa={class:"mobile-issuer"},Ca={key:0,class:"mobile-card-note"},Da={class:"mobile-note-text"},za={class:"mobile-card-secret"},Va={class:"mobile-secret-value"},Sa={class:"mobile-secret-text"},Ta={class:"mobile-secret-actions"},La={class:"mobile-card-code"},Ua={class:"mobile-code-display"},Aa={class:"mobile-card-timer"},Fa={class:"mobile-timer-text"},$a={key:5,class:"footer-stats"},Ea={class:"stat-item"},Ia={key:0,class:"stat-item"},Ra={class:"stat-item"},Ma={class:"template-dialog"},Oa={class:"template-header"},ja={class:"template-list"},Ba=["onClick"],Ka={class:"template-icon"},qa={class:"template-info"},Na={class:"template-name"},Pa={class:"template-desc"},Ga={key:0,class:"template-empty"},Ja={style:{"text-align":"center"}},Qa={key:0,style:{"margin-bottom":"16px"}},Wa=["src"],Ha={__name:"Home",setup(g){const R=_t(),u=gt(),$=d(null),U=d(window.innerWidth<=768),K=()=>{U.value=window.innerWidth<=768},L=d(!1),k=d([]),M=d({}),V=d(30),A=d(""),p=d([]),x=d(!1),F=d([]),le=d(null),_e=B(()=>k.value.filter(t=>t.is_favorite).slice(0,5)),E=d(!1),J=d("æ·»åŠ å¯†é’¥"),_=d({name:"",secret_key:"",issuer:"",note:""}),Q=d(!1),ne=d("merge"),W=d(null),H=d(!1),ye=d([]),he=d([]),X=d(""),Y=d(""),ie=d(!1),be=B(()=>{let t=ye.value;if(Y.value&&(t=t.filter(e=>e.category===Y.value)),X.value){const e=X.value.toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(e)||o.issuer.toLowerCase().includes(e)||o.description.toLowerCase().includes(e))}return t}),Be=[{content:"å¯¼å‡ºæ•°æ®",value:"export"},{content:"å¯¼å…¥æ•°æ®",value:"import"},{content:"è®¾ç½®",value:"settings"}],Ke=B(()=>{var e;const t=[{content:"ä¸ªäººèµ„æ–™",value:"profile",prefixIcon:"user"},{content:"ä¿®æ”¹å¯†ç ",value:"change-password",prefixIcon:"lock-on"}];return((e=$.value)==null?void 0:e.role)==="admin"&&t.push({content:"ç®¡ç†åå°",value:"admin",prefixIcon:"dashboard"}),t.push({content:"é€€å‡ºç™»å½•",value:"logout",prefixIcon:"poweroff",theme:"danger"}),t}),ke=t=>[{content:"ç¼–è¾‘",value:"edit"},{content:t.is_favorite?"å–æ¶ˆæ”¶è—":"æ”¶è—",value:"favorite"},{content:"åˆ é™¤",value:"delete",theme:"danger"}],we=B({get:()=>p.value.length===C.value.length&&C.value.length>0,set:t=>{t?p.value=C.value.map(e=>e.id):p.value=[]}}),Z=B(()=>V.value/30*100),C=B(()=>{let t=k.value;if(A.value){const e=A.value.toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(e)||o.issuer&&o.issuer.toLowerCase().includes(e)||o.note&&o.note.toLowerCase().includes(e))}return t.sort((e,o)=>e.is_favorite&&!o.is_favorite?-1:!e.is_favorite&&o.is_favorite?1:0)}),xe={github:"ğŸ”µ",google:"ğŸ”´",microsoft:"ğŸŸ¢",apple:"âš«",facebook:"ğŸ”µ",twitter:"ğŸ”µ",amazon:"ğŸŸ ",aws:"ğŸŸ ",azure:"ğŸ”µ",steam:"âš«",discord:"ğŸŸ£",telegram:"ğŸ”µ",dropbox:"ğŸ”µ",gitlab:"ğŸŸ ",default:"ğŸ”"},Ce={github:"#181717",google:"#4285F4",microsoft:"#00A4EF",apple:"#000000",facebook:"#1877F2",twitter:"#1DA1F2",amazon:"#FF9900",aws:"#FF9900",azure:"#0078D4",steam:"#171A21",discord:"#5865F2",telegram:"#26A5E4",dropbox:"#0061FF",gitlab:"#FC6D26",default:"#1890ff"},re=t=>{const e=(t.name+" "+(t.issuer||"")).toLowerCase();for(const[o,n]of Object.entries(xe))if(e.includes(o))return n;return xe.default},ce=t=>{const e=(t.name+" "+(t.issuer||"")).toLowerCase();for(const[o,n]of Object.entries(Ce))if(e.includes(o))return n;return Ce.default},O=async()=>{var t,e,o;L.value=!0;try{const n=await I.getAll();if(!Array.isArray(n.data.data))throw new Error("æ•°æ®æ ¼å¼é”™è¯¯");const f=n.data.data.filter(h=>!h.id||!h.name||!h.secret_key?(console.warn("å‘ç°æ— æ•ˆå¯†é’¥:",h),!1):!0);f.length<n.data.data.length&&r.warning(`å‘ç° ${n.data.data.length-f.length} ä¸ªæ— æ•ˆå¯†é’¥å·²è¢«è¿‡æ»¤`),k.value=f}catch(n){((t=n.response)==null?void 0:t.status)===401?k.value=[]:((e=n.response)==null?void 0:e.status)===403?(r.error("æƒé™ä¸è¶³ï¼Œæ— æ³•åŠ è½½æ•°æ®"),k.value=[]):((o=n.response)==null?void 0:o.status)>=500?(r.error("æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"),k.value=[]):!n.response&&n.request?k.value=[]:(r.error(n.message||"åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•"),k.value=[])}finally{L.value=!1}},q=async()=>{var t;try{const e=await I.getAllTokens(),o={};e.data.data.forEach(n=>{o[n.id]=n.token}),M.value=o,V.value=((t=e.data.data[0])==null?void 0:t.remaining)||30}catch{}},ue=t=>M.value[t]||"------",de=t=>t==="------"?t:t.slice(0,3)+" "+t.slice(3),ee=async t=>{const e=M.value[t];if(e&&e!=="------")try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),r.success("éªŒè¯ç å·²å¤åˆ¶ï¼ˆ30ç§’åè‡ªåŠ¨æ¸…é™¤ï¼‰");else{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.select();try{if(document.execCommand("copy"))r.success("éªŒè¯ç å·²å¤åˆ¶ï¼ˆ30ç§’åè‡ªåŠ¨æ¸…é™¤ï¼‰");else throw new Error("å¤åˆ¶å‘½ä»¤æ‰§è¡Œå¤±è´¥")}finally{document.body.removeChild(o)}}le.value=t,setTimeout(()=>{le.value=null},1e3),setTimeout(async()=>{try{navigator.clipboard&&navigator.clipboard.readText&&await navigator.clipboard.readText()===e&&await navigator.clipboard.writeText("")}catch{}},3e4)}catch(o){r.error("å¤åˆ¶å¤±è´¥ï¼š"+o.message)}else r.warning("éªŒè¯ç è¿˜æœªç”Ÿæˆï¼Œè¯·ç¨å€™")},ve=()=>{J.value="æ·»åŠ å¯†é’¥",_.value={name:"",secret_key:"",issuer:"",note:""},E.value=!0},qe=async()=>{await Ne(),await Pe(),H.value=!0};async function Ne(){ie.value=!0;try{const t=await Me.getAllTemplates();t.data.success&&(ye.value=t.data.data.templates||[])}catch(t){console.error("åŠ è½½æ¨¡æ¿å¤±è´¥:",t),r.error("åŠ è½½æ¨¡æ¿å¤±è´¥")}finally{ie.value=!1}}async function Pe(){try{const t=await Me.getCategories();t.data.success&&(he.value=t.data.data||[])}catch(t){console.error("åŠ è½½åˆ†ç±»å¤±è´¥:",t)}}function De(){}function Ge(t){J.value=`æ·»åŠ  ${t.name} å¯†é’¥`,_.value={name:t.name,secret_key:"",issuer:t.issuer,note:t.description},H.value=!1,E.value=!0}const N=d(!1),te=d(""),ze=d(null),ae=d(!1),Je=()=>{N.value=!0,te.value="",setTimeout(()=>{document.addEventListener("paste",me)},100)},Ve=()=>{document.removeEventListener("paste",me)},Qe=()=>{var t;(t=ze.value)==null||t.click()},We=t=>{const e=t.target.files[0];e&&pe(e)},He=t=>{t.preventDefault(),ae.value=!0},Xe=t=>{t.preventDefault(),ae.value=!1},Ye=t=>{t.preventDefault(),ae.value=!1;const e=t.dataTransfer.files[0];e&&e.type.startsWith("image/")?pe(e):r.warning("è¯·æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶")},me=t=>{var o;if(!N.value)return;const e=(o=t.clipboardData)==null?void 0:o.items;if(e){for(let n=0;n<e.length;n++)if(e[n].type.startsWith("image/")){const f=e[n].getAsFile();pe(f),t.preventDefault();break}}},pe=t=>{if(!t)return;if(!t.type.startsWith("image/")){r.error("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼ˆJPGã€PNG ç­‰æ ¼å¼ï¼‰");return}if(t.size>10*1024*1024){r.error("å›¾ç‰‡æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é€‰æ‹©å°äº 10MB çš„å›¾ç‰‡");return}const e=new FileReader;e.onload=async o=>{var n,f;try{te.value=o.target.result;const h=r.loading({content:"æ­£åœ¨è¯†åˆ«äºŒç»´ç ï¼Œè¯·ç¨å€™...",duration:0}),S=await wt.upload({image:o.target.result});if(h.close(),S.data.success){const T=S.data.data;if(console.log("è§£æç»“æœ:",T),!T.secret){r.error("äºŒç»´ç æ•°æ®ä¸å®Œæ•´ï¼Œç¼ºå°‘å¯†é’¥ä¿¡æ¯");return}_.value={name:T.name||T.issuer||"æœªå‘½å",secret_key:T.secret,issuer:T.issuer||"",note:""},r.success({content:"âœ“ äºŒç»´ç è¯†åˆ«æˆåŠŸï¼",duration:2e3}),N.value=!1,E.value=!0,Ve()}}catch(h){r.close(),console.error("äºŒç»´ç å¤„ç†é”™è¯¯:",h);const S=((f=(n=h.response)==null?void 0:n.data)==null?void 0:f.message)||h.message;S.includes("æœªèƒ½è¯†åˆ«")||S.includes("æœªæ‰¾åˆ°")?r.error({content:`âŒ æœªèƒ½è¯†åˆ«åˆ°äºŒç»´ç 

ğŸ’¡ è¯·ç¡®ä¿ï¼š
â€¢ å›¾ç‰‡æ¸…æ™°å®Œæ•´
â€¢ åŒ…å«å®Œæ•´çš„äºŒç»´ç 
â€¢ å…‰çº¿å……è¶³ã€æ— åå…‰
â€¢ å°è¯•æ”¾å¤§åæˆªå›¾`,duration:5e3}):S.includes("otpauth")?r.error({content:`âŒ äºŒç»´ç æ ¼å¼ä¸æ­£ç¡®

ğŸ’¡ è¯·ä½¿ç”¨ï¼š
â€¢ Google Authenticator
â€¢ Microsoft Authenticator
â€¢ å…¶ä»–æ ‡å‡† TOTP åº”ç”¨çš„äºŒç»´ç `,duration:5e3}):r.error({content:`äºŒç»´ç è§£æå¤±è´¥

åŸå› ï¼š`+S,duration:4e3})}},e.onerror=()=>{r.error("å›¾ç‰‡è¯»å–å¤±è´¥ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æœªæŸå")},e.readAsDataURL(t)},Ze=async()=>{var t,e;if(!_.value.name||!_.value.secret_key){r.warning("è¯·å¡«å†™åç§°å’Œå¯†é’¥");return}try{_.value.id?(await I.update(_.value.id,_.value),r.success("æ›´æ–°æˆåŠŸ")):(await I.create(_.value),r.success("æ·»åŠ æˆåŠŸ")),O(),q(),E.value=!1}catch(o){r.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"æ“ä½œå¤±è´¥")}},Se=async(t,e)=>{switch(t.value){case"edit":J.value="ç¼–è¾‘å¯†é’¥",_.value={...e},E.value=!0;break;case"favorite":try{await I.toggleFavorite(e.id),O(),r.success(e.is_favorite?"å·²å–æ¶ˆæ”¶è—":"å·²æ”¶è—")}catch{r.error("æ“ä½œå¤±è´¥")}break;case"delete":try{await I.delete(e.id),r.success("åˆ é™¤æˆåŠŸ"),O()}catch{r.error("åˆ é™¤å¤±è´¥")}break}},Te=async t=>{switch(t.value){case"export":try{const e=await Re.export(),o=new Blob([JSON.stringify(e.data.data,null,2)],{type:"application/json"}),n=URL.createObjectURL(o),f=document.createElement("a");f.href=n,f.download=`2fa-backup-${Date.now()}.json`,f.click(),URL.revokeObjectURL(n),localStorage.setItem("last_backup_time",Date.now().toString()),r.success("å¯¼å‡ºæˆåŠŸ")}catch{r.error("å¯¼å‡ºå¤±è´¥")}break;case"import":Q.value=!0;break;case"settings":R.push("/settings");break}},et=async t=>{switch(t.value){case"profile":r.info("ä¸ªäººèµ„æ–™åŠŸèƒ½å¼€å‘ä¸­...");break;case"change-password":r.info("ä¿®æ”¹å¯†ç åŠŸèƒ½å¼€å‘ä¸­...");break;case"admin":R.push("/admin");break;case"logout":await bt.confirm({header:"é€€å‡ºç™»å½•",body:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",confirmBtn:"é€€å‡º",cancelBtn:"å–æ¶ˆ"})&&(u.logout(),r.success("å·²é€€å‡ºç™»å½•"),R.push("/"));break}},tt=async()=>{if(u.authToken)try{const t=await kt.getCurrentUser();t.data.success&&($.value=t.data.data)}catch(t){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",t)}},Le=t=>{const e=F.value.indexOf(t);e>-1?F.value.splice(e,1):F.value.push(t)},Ue=async t=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t),r.success("å¯†é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");else{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{if(document.execCommand("copy"))r.success("å¯†é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");else throw new Error("å¤åˆ¶å‘½ä»¤æ‰§è¡Œå¤±è´¥")}finally{document.body.removeChild(e)}}}catch(e){r.error("å¤åˆ¶å¤±è´¥ï¼š"+e.message)}},at=()=>{x.value=!0,p.value=[]},Ae=()=>{x.value=!1,p.value=[]},Fe=t=>{const e=p.value.indexOf(t);e>-1?p.value.splice(e,1):p.value.push(t)},st=t=>{t?p.value=C.value.map(e=>e.id):p.value=[]},ot=async()=>{var e,o;if(p.value.length===0){r.warning("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„å¯†é’¥");return}if(confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${p.value.length} ä¸ªå¯†é’¥å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`))try{await I.batchDelete(p.value),r.success(`æˆåŠŸåˆ é™¤ ${p.value.length} ä¸ªå¯†é’¥`),O(),q(),Ae()}catch(n){r.error("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼š"+(((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||n.message))}},lt=()=>{if(p.value.length===0){r.warning("è¯·å…ˆé€‰æ‹©è¦å¯¼å‡ºçš„å¯†é’¥");return}try{const t=k.value.filter(h=>p.value.includes(h.id)),e={version:"2.0.0",timestamp:new Date().toISOString(),count:t.length,secrets:t},o=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(o),f=document.createElement("a");f.href=n,f.download=`2fa-selected-${t.length}-${Date.now()}.json`,f.click(),URL.revokeObjectURL(n),r.success(`æˆåŠŸå¯¼å‡º ${t.length} ä¸ªå¯†é’¥`)}catch(t){r.error("å¯¼å‡ºå¤±è´¥ï¼š"+t.message)}},nt=t=>{W.value=t.target.files[0]},it=async()=>{if(!W.value){r.warning("è¯·é€‰æ‹©æ–‡ä»¶");return}try{const t=await W.value.text(),e=JSON.parse(t);await Re.import({categories:e.categories,secrets:e.secrets,merge:ne.value==="merge"}),r.success("å¯¼å…¥æˆåŠŸ"),O(),q(),Q.value=!1}catch(t){r.error("å¯¼å…¥å¤±è´¥ï¼š"+t.message)}};Ct({onSearch:()=>{var t;return(t=document.querySelector(".search-input input"))==null?void 0:t.focus()},onNew:ve});const rt=()=>{const t=localStorage.getItem("last_backup_time");if(!t)return;const e=(Date.now()-parseInt(t))/(1e3*60*60*24);e>7&&setTimeout(()=>{r.warning({content:`æ‚¨å·²ç» ${Math.floor(e)} å¤©æ²¡æœ‰å¤‡ä»½æ•°æ®äº†ï¼Œå»ºè®®ç«‹å³å¤‡ä»½`,duration:8e3})},2e3)};let fe=null;return Oe(()=>{(u.isAuthenticated||u.authToken)&&(O(),q(),tt()),rt(),fe=setInterval(()=>{k.value.length>0&&u.isAuthenticated&&(V.value--,V.value<=0&&q())},1e3),window.addEventListener("resize",K)}),je(()=>{fe&&clearInterval(fe),window.removeEventListener("resize",K),document.removeEventListener("paste",me)}),(t,e)=>{const o=b("t-icon"),n=b("t-button"),f=b("t-dropdown"),h=b("t-input"),S=b("t-checkbox"),T=b("t-space"),ct=b("t-loading"),$e=b("t-progress"),j=b("t-form-item"),ut=b("t-textarea"),Ee=b("t-form"),se=b("t-dialog"),Ie=b("t-radio"),dt=b("t-radio-group"),vt=b("t-option"),mt=b("t-select"),pt=b("t-tag"),ft=yt("loading");return c(),m("div",Dt,[a("div",zt,[a("div",Vt,[a("div",St,[a("div",Tt,[a("div",Lt,[l(o,{name:"secured",size:"22px"})]),e[14]||(e[14]=a("div",{class:"brand-info"},[a("span",{class:"brand-name"},"2FA Authenticator")],-1))])]),a("div",Ut,[x.value?y("",!0):(c(),D(n,{key:0,theme:"primary",onClick:ve,class:"action-btn"},{icon:i(()=>[l(o,{name:"add"})]),default:i(()=>[e[15]||(e[15]=a("span",{class:"btn-text"},"æ–°å»º",-1))]),_:1})),!x.value&&C.value.length>0?(c(),D(n,{key:1,variant:"outline",onClick:at,class:"action-btn"},{icon:i(()=>[l(o,{name:"check-circle"})]),default:i(()=>[e[16]||(e[16]=a("span",{class:"btn-text"},"æ‰¹é‡",-1))]),_:1})):y("",!0),x.value?(c(),D(n,{key:2,theme:"danger",onClick:Ae,class:"action-btn exit-batch-btn"},{default:i(()=>[e[17]||(e[17]=a("span",{class:"btn-text"},"é€€å‡ºæ‰¹é‡",-1)),l(o,{name:"close",class:"btn-icon-only"})]),_:1})):y("",!0),x.value?y("",!0):(c(),D(f,{key:3,options:Be,onClick:Te},{default:i(()=>[l(n,{variant:"outline",shape:"circle",class:"icon-btn"},{default:i(()=>[l(o,{name:"ellipsis"})]),_:1})]),_:1})),!x.value&&$.value?(c(),D(f,{key:4,options:Ke.value,onClick:et},{default:i(()=>[l(n,{variant:"outline",class:"user-btn"},{default:i(()=>[l(o,{name:"user"}),a("span",At,v($.value.username),1)]),_:1})]),_:1},8,["options"])):y("",!0)]),a("div",Ft,[l(h,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=s=>A.value=s),placeholder:U.value?"æœç´¢...":"æœç´¢å¯†é’¥ã€å‘è¡Œå•†...",class:"search-input",clearable:""},{"prefix-icon":i(()=>[l(o,{name:"search"})]),_:1},8,["modelValue","placeholder"])])])]),x.value&&C.value.length>0?(c(),m("div",$t,[a("div",Et,[l(S,{modelValue:we.value,"onUpdate:modelValue":e[1]||(e[1]=s=>we.value=s),onChange:st},{default:i(()=>[...e[18]||(e[18]=[z(" å…¨é€‰ ",-1)])]),_:1},8,["modelValue"]),a("span",It,"å·²é€‰æ‹© "+v(p.value.length)+" é¡¹",1)]),a("div",Rt,[l(n,{theme:"primary",variant:"outline",disabled:p.value.length===0,onClick:lt},{icon:i(()=>[l(o,{name:"download"})]),default:i(()=>[e[19]||(e[19]=z(" å¯¼å‡ºé€‰ä¸­ ",-1))]),_:1},8,["disabled"]),l(n,{theme:"danger",disabled:p.value.length===0,onClick:ot},{icon:i(()=>[l(o,{name:"delete"})]),default:i(()=>[e[20]||(e[20]=z(" åˆ é™¤é€‰ä¸­ ",-1))]),_:1},8,["disabled"])])])):y("",!0),a("div",Mt,[!L.value&&_e.value.length>0?(c(),m("div",Ot,[a("div",jt,[l(o,{name:"star-filled",style:{color:"#faad14","margin-right":"8px"}}),e[21]||(e[21]=a("span",{class:"favorites-title"},"å¸¸ç”¨å¯†é’¥",-1))]),a("div",Bt,[(c(!0),m(P,null,G(_e.value,s=>(c(),m("div",{key:s.id,class:"favorite-item",onClick:w=>ee(s.id),title:`ç‚¹å‡»å¤åˆ¶ ${s.name} çš„éªŒè¯ç `},[a("div",{class:"favorite-icon",style:ge({backgroundColor:ce(s)})},v(re(s)),5),a("div",qt,[a("div",Nt,v(s.name),1),a("div",Pt,v(de(ue(s.id))),1)])],8,Kt))),128))])])):y("",!0),!L.value&&C.value.length===0?(c(),m("div",Gt,[a("div",Jt,[l(o,{name:"secured",size:"80px"})]),a("h3",Qt,v(A.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å¯†é’¥":"å¼€å§‹ä½¿ç”¨ 2FA ç¬”è®°æœ¬"),1),a("p",Wt,v(A.value?"è¯•è¯•å…¶ä»–æœç´¢å…³é”®è¯":"æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªä¸¤æ­¥éªŒè¯å¯†é’¥ï¼Œä¿æŠ¤è´¦æˆ·å®‰å…¨"),1),A.value?y("",!0):(c(),D(T,{key:0,direction:"vertical",size:"large"},{default:i(()=>[l(T,null,{default:i(()=>[l(n,{theme:"primary",size:"large",onClick:ve},{icon:i(()=>[l(o,{name:"add"})]),default:i(()=>[e[22]||(e[22]=z(" æ‰‹åŠ¨æ·»åŠ  ",-1))]),_:1}),l(n,{theme:"default",size:"large",onClick:qe},{icon:i(()=>[l(o,{name:"application"})]),default:i(()=>[e[23]||(e[23]=z(" ä»æ¨¡æ¿é€‰æ‹© ",-1))]),_:1})]),_:1}),l(n,{variant:"text",size:"large",onClick:e[2]||(e[2]=s=>Te({value:"import"}))},{default:i(()=>[...e[24]||(e[24]=[z(" æˆ–å¯¼å…¥ç°æœ‰æ•°æ® ",-1)])]),_:1})]),_:1}))])):L.value?(c(),D(ct,{key:2,size:"large",text:"åŠ è½½ä¸­..."})):(c(),m("div",Ht,[a("table",Xt,[a("thead",null,[a("tr",null,[x.value?(c(),m("th",Yt)):y("",!0),e[25]||(e[25]=a("th",{class:"icon-col"},null,-1)),e[26]||(e[26]=a("th",{class:"name-col"},"æœåŠ¡/åç§°",-1)),e[27]||(e[27]=a("th",{class:"issuer-col"},"å‘è¡Œè€…",-1)),e[28]||(e[28]=a("th",{class:"note-col"},"å¤‡æ³¨",-1)),e[29]||(e[29]=a("th",{class:"key-col"},"å¯†é’¥",-1)),e[30]||(e[30]=a("th",{class:"code-col"},"éªŒè¯ç ",-1)),e[31]||(e[31]=a("th",{class:"timer-col"},"å‰©ä½™æ—¶é—´",-1)),e[32]||(e[32]=a("th",{class:"action-col"},"æ“ä½œ",-1))])]),a("tbody",null,[(c(!0),m(P,null,G(C.value,s=>(c(),m("tr",{key:s.id,class:oe(["secret-row",{"selected-row":p.value.includes(s.id)}])},[x.value?(c(),m("td",Zt,[l(S,{checked:p.value.includes(s.id),onChange:w=>Fe(s.id)},null,8,["checked","onChange"])])):y("",!0),a("td",ea,[a("div",{class:"service-icon",style:ge({backgroundColor:ce(s)})},v(re(s)),5)]),a("td",ta,[a("div",aa,[a("span",sa,v(s.name),1),s.is_favorite?(c(),D(o,{key:0,name:"star-filled",style:{color:"#faad14","margin-left":"8px"}})):y("",!0)])]),a("td",oa,[a("span",la,v(s.issuer||"-"),1)]),a("td",na,[a("span",{class:"note-text",title:s.note},v(s.note||"-"),9,ia)]),a("td",ra,[a("div",ca,[a("span",ua,v(F.value.includes(s.id)?s.secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),1),a("div",da,[l(n,{size:"small",variant:"text",onClick:w=>Le(s.id),title:F.value.includes(s.id)?"éšè—å¯†é’¥":"æ˜¾ç¤ºå¯†é’¥"},{default:i(()=>[l(o,{name:F.value.includes(s.id)?"browse-off":"browse"},null,8,["name"])]),_:2},1032,["onClick","title"]),l(n,{size:"small",variant:"text",onClick:w=>Ue(s.secret_key),title:"å¤åˆ¶å¯†é’¥"},{default:i(()=>[l(o,{name:"file-copy"})]),_:1},8,["onClick"])])])]),a("td",va,[a("div",{class:oe(["code-display",{"code-expiring":V.value<=5,"copied-animation":le.value===s.id}]),onClick:w=>ee(s.id),title:V.value<=5?"éªŒè¯ç å³å°†è¿‡æœŸï¼":"ç‚¹å‡»å¤åˆ¶éªŒè¯ç "},v(de(ue(s.id))),11,ma)]),a("td",pa,[a("div",fa,[l($e,{percentage:Z.value,"stroke-width":6,theme:Z.value>30?"success":"warning","show-label":!1,style:{width:"100px","margin-right":"8px"}},null,8,["percentage","theme"]),a("span",ga,v(V.value)+"s",1)])]),a("td",_a,[x.value?(c(),m("span",ya,"æ‰¹é‡æ¨¡å¼")):(c(),D(T,{key:0,size:"small"},{default:i(()=>[l(n,{size:"small",theme:"primary",variant:"outline",onClick:w=>ee(s.id)},{default:i(()=>[l(o,{name:"file-copy"})]),_:1},8,["onClick"]),l(f,{options:ke(s),onClick:w=>Se(w,s)},{default:i(()=>[l(n,{size:"small",variant:"outline"},{default:i(()=>[l(o,{name:"more"})]),_:1})]),_:1},8,["options","onClick"])]),_:2},1024))])],2))),128))])])])),!L.value&&C.value.length>0?(c(),m("div",ha,[(c(!0),m(P,null,G(C.value,s=>(c(),m("div",{key:s.id,class:oe(["mobile-card",{"selected-card":p.value.includes(s.id)}])},[a("div",ba,[x.value?(c(),D(S,{key:0,checked:p.value.includes(s.id),onChange:w=>Fe(s.id),style:{"margin-right":"12px"}},null,8,["checked","onChange"])):y("",!0),a("div",ka,[a("div",{class:"service-icon-mobile",style:ge({backgroundColor:ce(s)})},v(re(s)),5),a("div",null,[a("div",wa,[z(v(s.name)+" ",1),s.is_favorite?(c(),D(o,{key:0,name:"star-filled",style:{color:"#faad14","margin-left":"4px"},size:"14px"})):y("",!0)]),a("div",xa,v(s.issuer||"æœªè®¾ç½®å‘è¡Œè€…"),1)])]),l(f,{options:ke(s),onClick:w=>Se(w,s)},{default:i(()=>[l(n,{size:"small",variant:"text"},{default:i(()=>[l(o,{name:"more",size:"20px"})]),_:1})]),_:1},8,["options","onClick"])]),s.note?(c(),m("div",Ca,[l(o,{name:"chat",size:"14px",style:{color:"#999","margin-right":"4px"}}),a("span",Da,v(s.note),1)])):y("",!0),a("div",za,[e[33]||(e[33]=a("div",{class:"mobile-secret-label"},"å¯†é’¥",-1)),a("div",Va,[a("span",Sa,v(F.value.includes(s.id)?s.secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),1),a("div",Ta,[l(n,{size:"small",variant:"text",onClick:w=>Le(s.id)},{default:i(()=>[l(o,{name:F.value.includes(s.id)?"browse-off":"browse"},null,8,["name"])]),_:2},1032,["onClick"]),l(n,{size:"small",variant:"text",onClick:w=>Ue(s.secret_key)},{default:i(()=>[l(o,{name:"file-copy"})]),_:1},8,["onClick"])])])]),a("div",La,[a("div",Ua,v(de(ue(s.id))),1),l(n,{theme:"primary",size:"large",block:"",onClick:w=>ee(s.id)},{icon:i(()=>[l(o,{name:"file-copy"})]),default:i(()=>[e[34]||(e[34]=z(" å¤åˆ¶éªŒè¯ç  ",-1))]),_:1},8,["onClick"])]),a("div",Aa,[l($e,{percentage:Z.value,"stroke-width":4,theme:Z.value>30?"success":"warning","show-label":!1},null,8,["percentage","theme"]),a("span",Fa,v(V.value)+" ç§’ååˆ·æ–°",1)])],2))),128))])):y("",!0),!L.value&&C.value.length>0?(c(),m("div",$a,[a("div",Ea,[l(o,{name:"key",size:"16px"}),a("span",null,"æ€»è®¡ "+v(k.value.length)+" ä¸ªå¯†é’¥",1)]),A.value?(c(),m("div",Ia,[l(o,{name:"search",size:"16px"}),a("span",null,"ç­›é€‰ "+v(C.value.length)+" ä¸ª",1)])):y("",!0),a("div",Ra,[l(o,{name:"refresh",size:"16px"}),a("span",null,v(V.value)+"ç§’ååˆ·æ–°",1)])])):y("",!0)]),l(se,{visible:E.value,"onUpdate:visible":e[7]||(e[7]=s=>E.value=s),header:J.value,width:U.value?"90%":"600px",onConfirm:Ze},{default:i(()=>[l(Ee,{data:_.value,"label-width":"80px"},{default:i(()=>[l(j,{label:"åç§°",required:""},{default:i(()=>[l(h,{modelValue:_.value.name,"onUpdate:modelValue":e[3]||(e[3]=s=>_.value.name=s),placeholder:"ä¾‹å¦‚ï¼šGitHub"},null,8,["modelValue"])]),_:1}),l(j,{label:"å¯†é’¥",required:""},{tips:i(()=>[l(T,{direction:"vertical",size:"4px"},{default:i(()=>[e[36]||(e[36]=a("span",null,"ä»æœåŠ¡å•†è·å–çš„å¯†é’¥å­—ç¬¦ä¸²",-1)),l(n,{size:"small",theme:"primary",variant:"text",onClick:Je},{default:i(()=>[...e[35]||(e[35]=[z(" æˆ–è€…ä¸Šä¼ äºŒç»´ç å›¾ç‰‡ ",-1)])]),_:1})]),_:1})]),default:i(()=>[l(h,{modelValue:_.value.secret_key,"onUpdate:modelValue":e[4]||(e[4]=s=>_.value.secret_key=s),placeholder:"Base32 æ ¼å¼å¯†é’¥"},null,8,["modelValue"])]),_:1}),l(j,{label:"å‘è¡Œè€…"},{default:i(()=>[l(h,{modelValue:_.value.issuer,"onUpdate:modelValue":e[5]||(e[5]=s=>_.value.issuer=s),placeholder:"ä¾‹å¦‚ï¼šgithub.com"},null,8,["modelValue"])]),_:1}),l(j,{label:"å¤‡æ³¨"},{default:i(()=>[l(ut,{modelValue:_.value.note,"onUpdate:modelValue":e[6]||(e[6]=s=>_.value.note=s),placeholder:"æ·»åŠ å¤‡æ³¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰",autosize:{minRows:2,maxRows:4}},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header","width"]),l(se,{visible:Q.value,"onUpdate:visible":e[9]||(e[9]=s=>Q.value=s),header:"å¯¼å…¥æ•°æ®",width:U.value?"90%":"500px",onConfirm:it},{default:i(()=>[l(Ee,null,{default:i(()=>[l(j,{label:"å¯¼å…¥æ¨¡å¼"},{default:i(()=>[l(dt,{modelValue:ne.value,"onUpdate:modelValue":e[8]||(e[8]=s=>ne.value=s)},{default:i(()=>[l(Ie,{value:"merge"},{default:i(()=>[...e[37]||(e[37]=[z("åˆå¹¶åˆ°ç°æœ‰æ•°æ®",-1)])]),_:1}),l(Ie,{value:"replace"},{default:i(()=>[...e[38]||(e[38]=[z("æ›¿æ¢ç°æœ‰æ•°æ®",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(j,{label:"é€‰æ‹©æ–‡ä»¶"},{default:i(()=>[a("input",{type:"file",accept:".json",onChange:nt,ref_key:"fileInputRef",ref:W},null,544)]),_:1})]),_:1})]),_:1},8,["visible","width"]),l(se,{visible:H.value,"onUpdate:visible":e[12]||(e[12]=s=>H.value=s),header:"ä»æ¨¡æ¿é€‰æ‹©",width:U.value?"95%":"800px",footer:!1},{default:i(()=>[a("div",Ma,[a("div",Oa,[l(h,{modelValue:X.value,"onUpdate:modelValue":e[10]||(e[10]=s=>X.value=s),placeholder:"æœç´¢æœåŠ¡åç§°...",clearable:"",onChange:De},{"suffix-icon":i(()=>[l(o,{name:"search"})]),_:1},8,["modelValue"]),l(mt,{modelValue:Y.value,"onUpdate:modelValue":e[11]||(e[11]=s=>Y.value=s),placeholder:"æ‰€æœ‰åˆ†ç±»",clearable:"",onChange:De,style:{width:"150px","margin-left":"12px"}},{default:i(()=>[(c(!0),m(P,null,G(he.value,s=>(c(),D(vt,{key:s.name,value:s.name,label:`${s.name} (${s.count})`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),ht((c(),m("div",ja,[(c(!0),m(P,null,G(be.value,s=>(c(),m("div",{key:s.id,class:"template-item",onClick:w=>Ge(s)},[a("div",Ka,[l(o,{name:s.icon,size:"32px"},null,8,["name"])]),a("div",qa,[a("div",Na,v(s.name),1),a("div",Pa,v(s.description),1)]),l(pt,{size:"small",theme:"default"},{default:i(()=>[z(v(s.category),1)]),_:2},1024)],8,Ba))),128)),be.value.length===0?(c(),m("div",Ga,[l(o,{name:"search",size:"48px"}),e[39]||(e[39]=a("p",null,"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ¨¡æ¿",-1))])):y("",!0)])),[[ft,ie.value]])])]),_:1},8,["visible","width"]),l(se,{visible:N.value,"onUpdate:visible":e[13]||(e[13]=s=>N.value=s),header:"æ‰«æäºŒç»´ç ",width:U.value?"90%":"500px",footer:!1,onClose:Ve},{default:i(()=>[a("div",Ja,[te.value?(c(),m("div",Qa,[a("img",{src:te.value,style:{"max-width":"100%","max-height":"300px","border-radius":"8px"}},null,8,Wa)])):y("",!0),a("div",{class:oe(["qr-upload-zone",{dragging:ae.value}]),onDrop:Ye,onDragover:He,onDragleave:Xe,onClick:Qe},[l(o,{name:"cloud-upload",size:"48px",style:{color:"#0052d9","margin-bottom":"16px"}}),e[40]||(e[40]=a("div",{class:"upload-text-primary"}," ğŸ“¤ ç‚¹å‡»é€‰æ‹© / æ‹–æ‹½å›¾ç‰‡ / Ctrl+V ç²˜è´´ ",-1)),e[41]||(e[41]=a("div",{class:"upload-text-secondary"}," æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæœ€å¤§ 10MB ",-1)),e[42]||(e[42]=a("div",{class:"upload-tips"},[a("div",{class:"tip-item"},"ğŸ’¡ ç¡®ä¿å›¾ç‰‡æ¸…æ™°å®Œæ•´"),a("div",{class:"tip-item"},"ğŸ’¡ åŒ…å«å®Œæ•´çš„äºŒç»´ç åŒºåŸŸ"),a("div",{class:"tip-item"},"ğŸ’¡ æ”¯æŒ Google / Microsoft Authenticator ç­‰æ ‡å‡†æ ¼å¼")],-1)),a("input",{ref_key:"qrFileInput",ref:ze,type:"file",accept:"image/*",style:{display:"none"},onChange:We},null,544)],34),e[43]||(e[43]=a("div",{style:{"margin-top":"16px",color:"#999","font-size":"13px","text-align":"left"}},[a("p",null,[a("strong",null,"ä½¿ç”¨æ–¹æ³•ï¼š")]),a("p",null,"â€¢ ç‚¹å‡»ä¸Šæ–¹åŒºåŸŸé€‰æ‹©å›¾ç‰‡"),a("p",null,"â€¢ æ‹–æ‹½å›¾ç‰‡åˆ°ä¸Šæ–¹åŒºåŸŸ"),a("p",null,"â€¢ å¤åˆ¶å›¾ç‰‡åæŒ‰ Ctrl+V ç²˜è´´"),a("p",null,"â€¢ ç³»ç»Ÿå°†è‡ªåŠ¨è§£æäºŒç»´ç å¹¶å¡«å……å¯†é’¥")],-1))])]),_:1},8,["visible","width"])])}}},es=xt(Ha,[["__scopeId","data-v-e83d36a1"]]);export{es as default};
