import{o as e,j as a,Y as l,r as t,c as s,O as n,P as i,Q as o,Z as r,b as c,_ as u,$ as d,a0 as v,a1 as m,F as p,a2 as f,E as h,a3 as y,R as g}from"./vendor-d600c78b.js";import{u as k}from"./index-64ce2276.js";import{s as b,q as w,b as x,u as _}from"./index-42d0e3ec.js";import{_ as C}from"./_plugin-vue_export-helper-1b428a4d.js";import{M as z,D}from"./ui-703c31fd.js";import"./utils-783a0963.js";const L={class:"home"},V={class:"header"},E={class:"header-container app-container"},U={class:"header-left"},j={class:"brand-logo"},F={class:"logo-icon"},A={class:"header-right"},I={class:"user-name"},T={class:"header-center"},O={key:0,class:"batch-toolbar"},R={class:"batch-toolbar-left"},S={class:"selected-count"},$={class:"batch-toolbar-right"},K={class:"main-content app-container"},P={key:0,class:"favorites-bar"},B={class:"favorites-header"},G={class:"favorites-list"},N=["onClick","title"],q={class:"favorite-info"},M={class:"favorite-name"},J={class:"favorite-token"},W={key:1,class:"empty-state"},H={class:"empty-icon"},Q={class:"empty-title"},Y={class:"empty-desc"},Z={key:3,class:"table-container desktop-view app-card"},X={class:"secret-table"},ee={key:0,class:"checkbox-col"},ae={key:0,class:"checkbox-cell"},le={class:"icon-cell"},te={class:"name-cell"},se={class:"name-wrapper"},ne={class:"secret-name"},ie={class:"issuer-cell"},oe={class:"issuer"},re={class:"note-cell"},ce=["title"],ue={class:"secret-key-cell"},de={class:"secret-key-wrapper"},ve={class:"secret-key-text"},me={class:"secret-key-actions"},pe={class:"code-cell"},fe=["onClick","title"],he={class:"timer-cell"},ye={class:"timer-wrapper"},ge={class:"timer-text"},ke={class:"action-cell"},be={key:1,style:{color:"#999"}},we={key:4,class:"mobile-view"},xe={class:"mobile-card-header"},_e={class:"mobile-card-title"},Ce={class:"mobile-name"},ze={class:"mobile-issuer"},De={key:0,class:"mobile-card-note"},Le={class:"mobile-note-text"},Ve={class:"mobile-card-secret"},Ee={class:"mobile-secret-value"},Ue={class:"mobile-secret-text"},je={class:"mobile-secret-actions"},Fe={class:"mobile-card-code"},Ae={class:"mobile-code-display"},Ie={class:"mobile-card-timer"},Te={class:"mobile-timer-text"},Oe={key:5,class:"footer-stats"},Re={class:"stat-item"},Se={key:0,class:"stat-item"},$e={class:"stat-item"},Ke={style:{"text-align":"center"}},Pe={key:0,style:{"margin-bottom":"16px"}},Be=["src"],Ge=C({__name:"Home",setup(C){const Ge=l(),Ne=k(),qe=t(null),Me=t(window.innerWidth<=768),Je=()=>{Me.value=window.innerWidth<=768},We=t(!1),He=t([]),Qe=t({}),Ye=t(30),Ze=t(""),Xe=t([]),ea=t(!1),aa=t([]),la=t(null),ta=s(()=>He.value.filter(e=>e.is_favorite).slice(0,5)),sa=t(!1),na=t("æ·»åŠ å¯†é’¥"),ia=t({name:"",secret_key:"",issuer:"",note:""}),oa=t(!1),ra=t("merge"),ca=t(null),ua=[{content:"å¯¼å‡ºæ•°æ®",value:"export"},{content:"å¯¼å…¥æ•°æ®",value:"import"},{content:"API å¯†é’¥",value:"api-keys"},{content:"ä¸»é¢˜å®šåˆ¶",value:"theme"},{content:"è®¾ç½®",value:"settings"}],da=s(()=>{var e;const a=[{content:"ä¸ªäººèµ„æ–™",value:"profile",prefixIcon:"user"},{content:"ä¿®æ”¹å¯†ç ",value:"change-password",prefixIcon:"lock-on"}];return"admin"===(null==(e=qe.value)?void 0:e.role)&&(a.push({content:"ç®¡ç†åå°",value:"admin",prefixIcon:"dashboard"}),a.push({content:"API å¯†é’¥",value:"api-keys",prefixIcon:"key"})),a.push({content:"ä¸»é¢˜å®šåˆ¶",value:"theme",prefixIcon:"palette"}),a.push({content:"é€€å‡ºç™»å½•",value:"logout",prefixIcon:"poweroff",theme:"danger"}),a}),va=e=>[{content:"ç¼–è¾‘",value:"edit"},{content:e.is_favorite?"å–æ¶ˆæ”¶è—":"æ”¶è—",value:"favorite"},{content:"åˆ é™¤",value:"delete",theme:"danger"}],ma=s({get:()=>Xe.value.length===fa.value.length&&fa.value.length>0,set:e=>{Xe.value=e?fa.value.map(e=>e.id):[]}}),pa=s(()=>Ye.value/30*100),fa=s(()=>{let e=He.value;if(Ze.value){const a=Ze.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a)||e.issuer&&e.issuer.toLowerCase().includes(a)||e.note&&e.note.toLowerCase().includes(a))}return e.sort((e,a)=>e.is_favorite&&!a.is_favorite?-1:!e.is_favorite&&a.is_favorite?1:0)}),ha={github:"ğŸ”µ",google:"ğŸ”´",microsoft:"ğŸŸ¢",apple:"âš«",facebook:"ğŸ”µ",twitter:"ğŸ”µ",amazon:"ğŸŸ ",aws:"ğŸŸ ",azure:"ğŸ”µ",steam:"âš«",discord:"ğŸŸ£",telegram:"ğŸ”µ",dropbox:"ğŸ”µ",gitlab:"ğŸŸ ",default:"ğŸ”"},ya={github:"#181717",google:"#4285F4",microsoft:"#00A4EF",apple:"#000000",facebook:"#1877F2",twitter:"#1DA1F2",amazon:"#FF9900",aws:"#FF9900",azure:"#0078D4",steam:"#171A21",discord:"#5865F2",telegram:"#26A5E4",dropbox:"#0061FF",gitlab:"#FC6D26",default:"#1890ff"},ga=e=>{const a=(e.name+" "+(e.issuer||"")).toLowerCase();for(const[l,t]of Object.entries(ha))if(a.includes(l))return t;return ha.default},ka=e=>{const a=(e.name+" "+(e.issuer||"")).toLowerCase();for(const[l,t]of Object.entries(ya))if(a.includes(l))return t;return ya.default},ba=async()=>{We.value=!0;try{const e=await b.getAll();if(!Array.isArray(e.data.data))throw new Error("æ•°æ®æ ¼å¼é”™è¯¯");const a=e.data.data.filter(e=>!!(e.id&&e.name&&e.secret_key));a.length<e.data.data.length&&z.warning(`å‘ç° ${e.data.data.length-a.length} ä¸ªæ— æ•ˆå¯†é’¥å·²è¢«è¿‡æ»¤`),He.value=a}catch(e){z.error("åŠ è½½å¤±è´¥ï¼š"+e.message)}finally{We.value=!1}},wa=async()=>{var e;try{const a=await b.getAllTokens(),l={};a.data.data.forEach(e=>{l[e.id]=e.token}),Qe.value=l,Ye.value=(null==(e=a.data.data[0])?void 0:e.remaining)||30}catch(a){}},xa=e=>Qe.value[e]||"------",_a=e=>"------"===e?e:e.slice(0,3)+" "+e.slice(3),Ca=async e=>{const a=Qe.value[e];if(a&&"------"!==a)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(a),z.success("éªŒè¯ç å·²å¤åˆ¶ï¼ˆ30ç§’åè‡ªåŠ¨æ¸…é™¤ï¼‰");else{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{if(!document.execCommand("copy"))throw new Error("å¤åˆ¶å‘½ä»¤æ‰§è¡Œå¤±è´¥");z.success("éªŒè¯ç å·²å¤åˆ¶ï¼ˆ30ç§’åè‡ªåŠ¨æ¸…é™¤ï¼‰")}finally{document.body.removeChild(e)}}la.value=e,setTimeout(()=>{la.value=null},1e3),setTimeout(async()=>{try{if(navigator.clipboard&&navigator.clipboard.readText){await navigator.clipboard.readText()===a&&await navigator.clipboard.writeText("")}}catch(e){}},3e4)}catch(l){z.error("å¤åˆ¶å¤±è´¥ï¼š"+l.message)}else z.warning("éªŒè¯ç è¿˜æœªç”Ÿæˆï¼Œè¯·ç¨å€™")},za=()=>{na.value="æ·»åŠ å¯†é’¥",ia.value={name:"",secret_key:"",issuer:"",note:""},sa.value=!0},Da=t(!1),La=t(""),Va=t(null),Ea=t(!1),Ua=()=>{Da.value=!0,La.value="",setTimeout(()=>{document.addEventListener("paste",Ra)},100)},ja=()=>{document.removeEventListener("paste",Ra)},Fa=()=>{var e;null==(e=Va.value)||e.click()},Aa=e=>{const a=e.target.files[0];a&&Sa(a)},Ia=e=>{e.preventDefault(),Ea.value=!0},Ta=e=>{e.preventDefault(),Ea.value=!1},Oa=e=>{e.preventDefault(),Ea.value=!1;const a=e.dataTransfer.files[0];a&&a.type.startsWith("image/")?Sa(a):z.warning("è¯·æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶")},Ra=e=>{var a;if(!Da.value)return;const l=null==(a=e.clipboardData)?void 0:a.items;if(l)for(let t=0;t<l.length;t++)if(l[t].type.startsWith("image/")){const a=l[t].getAsFile();Sa(a),e.preventDefault();break}},Sa=e=>{if(!e)return;if(!e.type.startsWith("image/"))return void z.error("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼ˆJPGã€PNG ç­‰æ ¼å¼ï¼‰");if(e.size>10485760)return void z.error("å›¾ç‰‡æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é€‰æ‹©å°äº 10MB çš„å›¾ç‰‡");const a=new FileReader;a.onload=async e=>{var a,l;try{La.value=e.target.result;const a=z.loading({content:"æ­£åœ¨è¯†åˆ«äºŒç»´ç ï¼Œè¯·ç¨å€™...",duration:0}),l=await w.upload({image:e.target.result});if(a.close(),l.data.success){const e=l.data.data;if(!e.secret)return void z.error("äºŒç»´ç æ•°æ®ä¸å®Œæ•´ï¼Œç¼ºå°‘å¯†é’¥ä¿¡æ¯");ia.value={name:e.name||e.issuer||"æœªå‘½å",secret_key:e.secret,issuer:e.issuer||"",note:""},z.success({content:"âœ“ äºŒç»´ç è¯†åˆ«æˆåŠŸï¼",duration:2e3}),Da.value=!1,sa.value=!0,ja()}}catch(t){z.close();const e=(null==(l=null==(a=t.response)?void 0:a.data)?void 0:l.message)||t.message;e.includes("æœªèƒ½è¯†åˆ«")||e.includes("æœªæ‰¾åˆ°")?z.error({content:"âŒ æœªèƒ½è¯†åˆ«åˆ°äºŒç»´ç \n\nğŸ’¡ è¯·ç¡®ä¿ï¼š\nâ€¢ å›¾ç‰‡æ¸…æ™°å®Œæ•´\nâ€¢ åŒ…å«å®Œæ•´çš„äºŒç»´ç \nâ€¢ å…‰çº¿å……è¶³ã€æ— åå…‰\nâ€¢ å°è¯•æ”¾å¤§åæˆªå›¾",duration:5e3}):e.includes("otpauth")?z.error({content:"âŒ äºŒç»´ç æ ¼å¼ä¸æ­£ç¡®\n\nğŸ’¡ è¯·ä½¿ç”¨ï¼š\nâ€¢ Google Authenticator\nâ€¢ Microsoft Authenticator\nâ€¢ å…¶ä»–æ ‡å‡† TOTP åº”ç”¨çš„äºŒç»´ç ",duration:5e3}):z.error({content:"äºŒç»´ç è§£æå¤±è´¥\n\nåŸå› ï¼š"+e,duration:4e3})}},a.onerror=()=>{z.error("å›¾ç‰‡è¯»å–å¤±è´¥ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æœªæŸå")},a.readAsDataURL(e)},$a=async()=>{var e,a;if(ia.value.name&&ia.value.secret_key)try{ia.value.id?(await b.update(ia.value.id,ia.value),z.success("æ›´æ–°æˆåŠŸ")):(await b.create(ia.value),z.success("æ·»åŠ æˆåŠŸ")),ba(),wa(),sa.value=!1}catch(l){z.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"æ“ä½œå¤±è´¥")}else z.warning("è¯·å¡«å†™åç§°å’Œå¯†é’¥")},Ka=async(e,a)=>{switch(e.value){case"edit":na.value="ç¼–è¾‘å¯†é’¥",ia.value={...a},sa.value=!0;break;case"favorite":try{await b.toggleFavorite(a.id),ba(),z.success(a.is_favorite?"å·²å–æ¶ˆæ”¶è—":"å·²æ”¶è—")}catch(l){z.error("æ“ä½œå¤±è´¥")}break;case"delete":try{await b.delete(a.id),z.success("åˆ é™¤æˆåŠŸ"),ba()}catch(l){z.error("åˆ é™¤å¤±è´¥")}}},Pa=async e=>{switch(e.value){case"export":try{const e=await x.export(),a=new Blob([JSON.stringify(e.data.data,null,2)],{type:"application/json"}),l=URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=`2fa-backup-${Date.now()}.json`,t.click(),URL.revokeObjectURL(l),localStorage.setItem("last_backup_time",Date.now().toString()),z.success("å¯¼å‡ºæˆåŠŸ")}catch(a){z.error("å¯¼å‡ºå¤±è´¥")}break;case"import":oa.value=!0;break;case"api-keys":Ge.push("/api-keys");break;case"theme":Ge.push("/theme");break;case"settings":Ge.push("/settings")}},Ba=()=>{Ne.lock(),Ge.push("/unlock")},Ga=async e=>{switch(e.value){case"profile":case"change-password":Ge.push("/profile");break;case"admin":Ge.push("/admin");break;case"api-keys":Ge.push("/api-keys");break;case"theme":Ge.push("/theme");break;case"logout":await D.confirm({header:"é€€å‡ºç™»å½•",body:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",confirmBtn:"é€€å‡º",cancelBtn:"å–æ¶ˆ"})&&(Ne.logout(),z.success("å·²é€€å‡ºç™»å½•"),Ge.push("/login"))}},Na=e=>{const a=aa.value.indexOf(e);a>-1?aa.value.splice(a,1):aa.value.push(e)},qa=async e=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),z.success("å¯†é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");else{const a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.select();try{if(!document.execCommand("copy"))throw new Error("å¤åˆ¶å‘½ä»¤æ‰§è¡Œå¤±è´¥");z.success("å¯†é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}finally{document.body.removeChild(a)}}}catch(a){z.error("å¤åˆ¶å¤±è´¥ï¼š"+a.message)}},Ma=()=>{ea.value=!0,Xe.value=[]},Ja=()=>{ea.value=!1,Xe.value=[]},Wa=e=>{const a=Xe.value.indexOf(e);a>-1?Xe.value.splice(a,1):Xe.value.push(e)},Ha=e=>{Xe.value=e?fa.value.map(e=>e.id):[]},Qa=async()=>{var e,a;if(0===Xe.value.length)return void z.warning("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„å¯†é’¥");if(confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${Xe.value.length} ä¸ªå¯†é’¥å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`))try{await b.batchDelete(Xe.value),z.success(`æˆåŠŸåˆ é™¤ ${Xe.value.length} ä¸ªå¯†é’¥`),ba(),wa(),Ja()}catch(l){z.error("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼š"+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||l.message))}},Ya=()=>{if(0!==Xe.value.length)try{const e=He.value.filter(e=>Xe.value.includes(e.id)),a={version:"2.0.0",timestamp:(new Date).toISOString(),count:e.length,secrets:e},l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=URL.createObjectURL(l),s=document.createElement("a");s.href=t,s.download=`2fa-selected-${e.length}-${Date.now()}.json`,s.click(),URL.revokeObjectURL(t),z.success(`æˆåŠŸå¯¼å‡º ${e.length} ä¸ªå¯†é’¥`)}catch(e){z.error("å¯¼å‡ºå¤±è´¥ï¼š"+e.message)}else z.warning("è¯·å…ˆé€‰æ‹©è¦å¯¼å‡ºçš„å¯†é’¥")},Za=e=>{ca.value=e.target.files[0]},Xa=async()=>{if(ca.value)try{const e=await ca.value.text(),a=JSON.parse(e);await x.import({categories:a.categories,secrets:a.secrets,merge:"merge"===ra.value}),z.success("å¯¼å…¥æˆåŠŸ"),ba(),wa(),oa.value=!1}catch(e){z.error("å¯¼å…¥å¤±è´¥ï¼š"+e.message)}else z.warning("è¯·é€‰æ‹©æ–‡ä»¶")};!function(l){const t=e=>{var a,t,s,n,i,o;if((e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),null==(a=l.onSearch)||a.call(l)),(e.ctrlKey||e.metaKey)&&"n"===e.key&&(e.preventDefault(),null==(t=l.onNew)||t.call(l)),(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),null==(s=l.onSave)||s.call(l)),(e.ctrlKey||e.metaKey)&&"l"===e.key&&(e.preventDefault(),null==(n=l.onLock)||n.call(l)),"Escape"===e.key&&(null==(i=l.onEscape)||i.call(l)),/^[1-9]$/.test(e.key)&&(e.ctrlKey||e.metaKey)){e.preventDefault();const a=parseInt(e.key)-1;null==(o=l.onQuickCopy)||o.call(l,a)}};e(()=>{document.addEventListener("keydown",t)}),a(()=>{document.removeEventListener("keydown",t)})}({onSearch:()=>{var e;return null==(e=document.querySelector(".search-input input"))?void 0:e.focus()},onNew:za,onLock:Ba});let el=null;return e(()=>{ba(),wa(),(async()=>{if(Ne.authToken)try{const e=await _.getCurrentUser();e.data.success&&(qe.value=e.data.data)}catch(e){}})(),(()=>{const e=localStorage.getItem("last_backup_time");if(!e)return;const a=(Date.now()-parseInt(e))/864e5;a>7&&setTimeout(()=>{z.warning({content:`æ‚¨å·²ç» ${Math.floor(a)} å¤©æ²¡æœ‰å¤‡ä»½æ•°æ®äº†ï¼Œå»ºè®®ç«‹å³å¤‡ä»½`,duration:8e3})},2e3)})(),el=setInterval(()=>{Ye.value--,Ye.value<=0&&wa()},1e3),window.addEventListener("resize",Je)}),a(()=>{el&&clearInterval(el),window.removeEventListener("resize",Je),document.removeEventListener("paste",Ra)}),(e,a)=>{const l=n("t-icon"),t=n("t-button"),s=n("t-dropdown"),k=n("t-input"),b=n("t-checkbox"),w=n("t-space"),x=n("t-loading"),_=n("t-progress"),C=n("t-form-item"),z=n("t-textarea"),D=n("t-form"),Ge=n("t-dialog"),Ne=n("t-radio"),Je=n("t-radio-group");return i(),o("div",L,[r("div",V,[r("div",E,[r("div",U,[r("div",j,[r("div",F,[c(l,{name:"secured",size:"22px"})]),a[11]||(a[11]=r("div",{class:"brand-info"},[r("span",{class:"brand-name"},"2FA Authenticator")],-1))])]),r("div",A,[ea.value?v("",!0):(i(),u(t,{key:0,theme:"primary",onClick:za,class:"action-btn"},{icon:d(()=>[c(l,{name:"add"})]),default:d(()=>[a[12]||(a[12]=r("span",{class:"btn-text"},"æ–°å»º",-1))]),_:1})),!ea.value&&fa.value.length>0?(i(),u(t,{key:1,variant:"outline",onClick:Ma,class:"action-btn"},{icon:d(()=>[c(l,{name:"check-circle"})]),default:d(()=>[a[13]||(a[13]=r("span",{class:"btn-text"},"æ‰¹é‡",-1))]),_:1})):v("",!0),ea.value?(i(),u(t,{key:2,theme:"danger",onClick:Ja,class:"action-btn exit-batch-btn"},{default:d(()=>[a[14]||(a[14]=r("span",{class:"btn-text"},"é€€å‡ºæ‰¹é‡",-1)),c(l,{name:"close",class:"btn-icon-only"})]),_:1})):v("",!0),ea.value?v("",!0):(i(),u(s,{key:3,options:ua,onClick:Pa},{default:d(()=>[c(t,{variant:"outline",shape:"circle",class:"icon-btn"},{default:d(()=>[c(l,{name:"ellipsis"})]),_:1})]),_:1})),!ea.value&&qe.value?(i(),u(s,{key:4,options:da.value,onClick:Ga},{default:d(()=>[c(t,{variant:"outline",class:"user-btn"},{default:d(()=>[c(l,{name:"user"}),r("span",I,m(qe.value.username),1)]),_:1})]),_:1},8,["options"])):v("",!0),ea.value?v("",!0):(i(),u(t,{key:5,variant:"outline",shape:"circle",onClick:Ba,class:"icon-btn"},{default:d(()=>[c(l,{name:"lock-on"})]),_:1}))]),r("div",T,[c(k,{modelValue:Ze.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Ze.value=e),placeholder:Me.value?"æœç´¢...":"æœç´¢å¯†é’¥ã€å‘è¡Œå•†...",class:"search-input",clearable:""},{"prefix-icon":d(()=>[c(l,{name:"search"})]),_:1},8,["modelValue","placeholder"])])])]),ea.value&&fa.value.length>0?(i(),o("div",O,[r("div",R,[c(b,{modelValue:ma.value,"onUpdate:modelValue":a[1]||(a[1]=e=>ma.value=e),onChange:Ha},{default:d(()=>[...a[15]||(a[15]=[h(" å…¨é€‰ ",-1)])]),_:1},8,["modelValue"]),r("span",S,"å·²é€‰æ‹© "+m(Xe.value.length)+" é¡¹",1)]),r("div",$,[c(t,{theme:"primary",variant:"outline",disabled:0===Xe.value.length,onClick:Ya},{icon:d(()=>[c(l,{name:"download"})]),default:d(()=>[a[16]||(a[16]=h(" å¯¼å‡ºé€‰ä¸­ ",-1))]),_:1},8,["disabled"]),c(t,{theme:"danger",disabled:0===Xe.value.length,onClick:Qa},{icon:d(()=>[c(l,{name:"delete"})]),default:d(()=>[a[17]||(a[17]=h(" åˆ é™¤é€‰ä¸­ ",-1))]),_:1},8,["disabled"])])])):v("",!0),r("div",K,[!We.value&&ta.value.length>0?(i(),o("div",P,[r("div",B,[c(l,{name:"star-filled",style:{color:"#faad14","margin-right":"8px"}}),a[18]||(a[18]=r("span",{class:"favorites-title"},"å¸¸ç”¨å¯†é’¥",-1))]),r("div",G,[(i(!0),o(p,null,f(ta.value,e=>(i(),o("div",{key:e.id,class:"favorite-item",onClick:a=>Ca(e.id),title:`ç‚¹å‡»å¤åˆ¶ ${e.name} çš„éªŒè¯ç `},[r("div",{class:"favorite-icon",style:y({backgroundColor:ka(e)})},m(ga(e)),5),r("div",q,[r("div",M,m(e.name),1),r("div",J,m(_a(xa(e.id))),1)])],8,N))),128))])])):v("",!0),We.value||0!==fa.value.length?We.value?(i(),u(x,{key:2,size:"large",text:"åŠ è½½ä¸­..."})):(i(),o("div",Z,[r("table",X,[r("thead",null,[r("tr",null,[ea.value?(i(),o("th",ee)):v("",!0),a[21]||(a[21]=r("th",{class:"icon-col"},null,-1)),a[22]||(a[22]=r("th",{class:"name-col"},"æœåŠ¡/åç§°",-1)),a[23]||(a[23]=r("th",{class:"issuer-col"},"å‘è¡Œè€…",-1)),a[24]||(a[24]=r("th",{class:"note-col"},"å¤‡æ³¨",-1)),a[25]||(a[25]=r("th",{class:"key-col"},"å¯†é’¥",-1)),a[26]||(a[26]=r("th",{class:"code-col"},"éªŒè¯ç ",-1)),a[27]||(a[27]=r("th",{class:"timer-col"},"å‰©ä½™æ—¶é—´",-1)),a[28]||(a[28]=r("th",{class:"action-col"},"æ“ä½œ",-1))])]),r("tbody",null,[(i(!0),o(p,null,f(fa.value,e=>(i(),o("tr",{key:e.id,class:g(["secret-row",{"selected-row":Xe.value.includes(e.id)}])},[ea.value?(i(),o("td",ae,[c(b,{checked:Xe.value.includes(e.id),onChange:a=>Wa(e.id)},null,8,["checked","onChange"])])):v("",!0),r("td",le,[r("div",{class:"service-icon",style:y({backgroundColor:ka(e)})},m(ga(e)),5)]),r("td",te,[r("div",se,[r("span",ne,m(e.name),1),e.is_favorite?(i(),u(l,{key:0,name:"star-filled",style:{color:"#faad14","margin-left":"8px"}})):v("",!0)])]),r("td",ie,[r("span",oe,m(e.issuer||"-"),1)]),r("td",re,[r("span",{class:"note-text",title:e.note},m(e.note||"-"),9,ce)]),r("td",ue,[r("div",de,[r("span",ve,m(aa.value.includes(e.id)?e.secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),1),r("div",me,[c(t,{size:"small",variant:"text",onClick:a=>Na(e.id),title:aa.value.includes(e.id)?"éšè—å¯†é’¥":"æ˜¾ç¤ºå¯†é’¥"},{default:d(()=>[c(l,{name:aa.value.includes(e.id)?"browse-off":"browse"},null,8,["name"])]),_:2},1032,["onClick","title"]),c(t,{size:"small",variant:"text",onClick:a=>qa(e.secret_key),title:"å¤åˆ¶å¯†é’¥"},{default:d(()=>[c(l,{name:"file-copy"})]),_:1},8,["onClick"])])])]),r("td",pe,[r("div",{class:g(["code-display",{"code-expiring":Ye.value<=5,"copied-animation":la.value===e.id}]),onClick:a=>Ca(e.id),title:Ye.value<=5?"éªŒè¯ç å³å°†è¿‡æœŸï¼":"ç‚¹å‡»å¤åˆ¶éªŒè¯ç "},m(_a(xa(e.id))),11,fe)]),r("td",he,[r("div",ye,[c(_,{percentage:pa.value,"stroke-width":6,theme:pa.value>30?"success":"warning","show-label":!1,style:{width:"100px","margin-right":"8px"}},null,8,["percentage","theme"]),r("span",ge,m(Ye.value)+"s",1)])]),r("td",ke,[ea.value?(i(),o("span",be,"æ‰¹é‡æ¨¡å¼")):(i(),u(w,{key:0,size:"small"},{default:d(()=>[c(t,{size:"small",theme:"primary",variant:"outline",onClick:a=>Ca(e.id)},{default:d(()=>[c(l,{name:"file-copy"})]),_:1},8,["onClick"]),c(s,{options:va(e),onClick:a=>Ka(a,e)},{default:d(()=>[c(t,{size:"small",variant:"outline"},{default:d(()=>[c(l,{name:"more"})]),_:1})]),_:1},8,["options","onClick"])]),_:2},1024))])],2))),128))])])])):(i(),o("div",W,[r("div",H,[c(l,{name:"secured",size:"80px"})]),r("h3",Q,m(Ze.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å¯†é’¥":"å¼€å§‹ä½¿ç”¨ 2FA ç¬”è®°æœ¬"),1),r("p",Y,m(Ze.value?"è¯•è¯•å…¶ä»–æœç´¢å…³é”®è¯":"æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªä¸¤æ­¥éªŒè¯å¯†é’¥ï¼Œä¿æŠ¤è´¦æˆ·å®‰å…¨"),1),Ze.value?v("",!0):(i(),u(w,{key:0,direction:"vertical",size:"large"},{default:d(()=>[c(t,{theme:"primary",size:"large",onClick:za},{icon:d(()=>[c(l,{name:"add"})]),default:d(()=>[a[19]||(a[19]=h(" æ·»åŠ å¯†é’¥ ",-1))]),_:1}),c(t,{variant:"text",size:"large",onClick:a[2]||(a[2]=e=>Pa({value:"import"}))},{default:d(()=>[...a[20]||(a[20]=[h(" æˆ–å¯¼å…¥ç°æœ‰æ•°æ® ",-1)])]),_:1})]),_:1}))])),!We.value&&fa.value.length>0?(i(),o("div",we,[(i(!0),o(p,null,f(fa.value,e=>(i(),o("div",{key:e.id,class:g(["mobile-card",{"selected-card":Xe.value.includes(e.id)}])},[r("div",xe,[ea.value?(i(),u(b,{key:0,checked:Xe.value.includes(e.id),onChange:a=>Wa(e.id),style:{"margin-right":"12px"}},null,8,["checked","onChange"])):v("",!0),r("div",_e,[r("div",{class:"service-icon-mobile",style:y({backgroundColor:ka(e)})},m(ga(e)),5),r("div",null,[r("div",Ce,[h(m(e.name)+" ",1),e.is_favorite?(i(),u(l,{key:0,name:"star-filled",style:{color:"#faad14","margin-left":"4px"},size:"14px"})):v("",!0)]),r("div",ze,m(e.issuer||"æœªè®¾ç½®å‘è¡Œè€…"),1)])]),c(s,{options:va(e),onClick:a=>Ka(a,e)},{default:d(()=>[c(t,{size:"small",variant:"text"},{default:d(()=>[c(l,{name:"more",size:"20px"})]),_:1})]),_:1},8,["options","onClick"])]),e.note?(i(),o("div",De,[c(l,{name:"chat",size:"14px",style:{color:"#999","margin-right":"4px"}}),r("span",Le,m(e.note),1)])):v("",!0),r("div",Ve,[a[29]||(a[29]=r("div",{class:"mobile-secret-label"},"å¯†é’¥",-1)),r("div",Ee,[r("span",Ue,m(aa.value.includes(e.id)?e.secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),1),r("div",je,[c(t,{size:"small",variant:"text",onClick:a=>Na(e.id)},{default:d(()=>[c(l,{name:aa.value.includes(e.id)?"browse-off":"browse"},null,8,["name"])]),_:2},1032,["onClick"]),c(t,{size:"small",variant:"text",onClick:a=>qa(e.secret_key)},{default:d(()=>[c(l,{name:"file-copy"})]),_:1},8,["onClick"])])])]),r("div",Fe,[r("div",Ae,m(_a(xa(e.id))),1),c(t,{theme:"primary",size:"large",block:"",onClick:a=>Ca(e.id)},{icon:d(()=>[c(l,{name:"file-copy"})]),default:d(()=>[a[30]||(a[30]=h(" å¤åˆ¶éªŒè¯ç  ",-1))]),_:1},8,["onClick"])]),r("div",Ie,[c(_,{percentage:pa.value,"stroke-width":4,theme:pa.value>30?"success":"warning","show-label":!1},null,8,["percentage","theme"]),r("span",Te,m(Ye.value)+" ç§’ååˆ·æ–°",1)])],2))),128))])):v("",!0),!We.value&&fa.value.length>0?(i(),o("div",Oe,[r("div",Re,[c(l,{name:"key",size:"16px"}),r("span",null,"æ€»è®¡ "+m(He.value.length)+" ä¸ªå¯†é’¥",1)]),Ze.value?(i(),o("div",Se,[c(l,{name:"search",size:"16px"}),r("span",null,"ç­›é€‰ "+m(fa.value.length)+" ä¸ª",1)])):v("",!0),r("div",$e,[c(l,{name:"refresh",size:"16px"}),r("span",null,m(Ye.value)+"ç§’ååˆ·æ–°",1)])])):v("",!0)]),c(Ge,{visible:sa.value,"onUpdate:visible":a[7]||(a[7]=e=>sa.value=e),header:na.value,width:Me.value?"92%":"600px",onConfirm:$a},{default:d(()=>[c(D,{data:ia.value,"label-width":"80px"},{default:d(()=>[c(C,{label:"åç§°",required:""},{default:d(()=>[c(k,{modelValue:ia.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>ia.value.name=e),placeholder:"ä¾‹å¦‚ï¼šGitHub"},null,8,["modelValue"])]),_:1}),c(C,{label:"å¯†é’¥",required:""},{tips:d(()=>[c(w,{direction:"vertical",size:"4px"},{default:d(()=>[a[32]||(a[32]=r("span",null,"ä»æœåŠ¡å•†è·å–çš„å¯†é’¥å­—ç¬¦ä¸²",-1)),c(t,{size:"small",theme:"primary",variant:"text",onClick:Ua},{default:d(()=>[...a[31]||(a[31]=[h(" æˆ–è€…ä¸Šä¼ äºŒç»´ç å›¾ç‰‡ ",-1)])]),_:1})]),_:1})]),default:d(()=>[c(k,{modelValue:ia.value.secret_key,"onUpdate:modelValue":a[4]||(a[4]=e=>ia.value.secret_key=e),placeholder:"Base32 æ ¼å¼å¯†é’¥"},null,8,["modelValue"])]),_:1}),c(C,{label:"å‘è¡Œè€…"},{default:d(()=>[c(k,{modelValue:ia.value.issuer,"onUpdate:modelValue":a[5]||(a[5]=e=>ia.value.issuer=e),placeholder:"ä¾‹å¦‚ï¼šgithub.com"},null,8,["modelValue"])]),_:1}),c(C,{label:"å¤‡æ³¨"},{default:d(()=>[c(z,{modelValue:ia.value.note,"onUpdate:modelValue":a[6]||(a[6]=e=>ia.value.note=e),placeholder:"æ·»åŠ å¤‡æ³¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰",autosize:{minRows:2,maxRows:4}},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header","width"]),c(Ge,{visible:oa.value,"onUpdate:visible":a[9]||(a[9]=e=>oa.value=e),header:"å¯¼å…¥æ•°æ®",width:Me.value?"92%":"500px",onConfirm:Xa},{default:d(()=>[c(D,null,{default:d(()=>[c(C,{label:"å¯¼å…¥æ¨¡å¼"},{default:d(()=>[c(Je,{modelValue:ra.value,"onUpdate:modelValue":a[8]||(a[8]=e=>ra.value=e)},{default:d(()=>[c(Ne,{value:"merge"},{default:d(()=>[...a[33]||(a[33]=[h("åˆå¹¶åˆ°ç°æœ‰æ•°æ®",-1)])]),_:1}),c(Ne,{value:"replace"},{default:d(()=>[...a[34]||(a[34]=[h("æ›¿æ¢ç°æœ‰æ•°æ®",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(C,{label:"é€‰æ‹©æ–‡ä»¶"},{default:d(()=>[r("input",{type:"file",accept:".json",onChange:Za,ref_key:"fileInputRef",ref:ca},null,544)]),_:1})]),_:1})]),_:1},8,["visible","width"]),c(Ge,{visible:Da.value,"onUpdate:visible":a[10]||(a[10]=e=>Da.value=e),header:"æ‰«æäºŒç»´ç ",width:Me.value?"92%":"500px",footer:!1,onClose:ja},{default:d(()=>[r("div",Ke,[La.value?(i(),o("div",Pe,[r("img",{src:La.value,style:{"max-width":"100%","max-height":"300px","border-radius":"8px"}},null,8,Be)])):v("",!0),r("div",{class:g(["qr-upload-zone",{dragging:Ea.value}]),onDrop:Oa,onDragover:Ia,onDragleave:Ta,onClick:Fa},[c(l,{name:"cloud-upload",size:"48px",style:{color:"#0052d9","margin-bottom":"16px"}}),a[35]||(a[35]=r("div",{class:"upload-text-primary"}," ğŸ“¤ ç‚¹å‡»é€‰æ‹© / æ‹–æ‹½å›¾ç‰‡ / Ctrl+V ç²˜è´´ ",-1)),a[36]||(a[36]=r("div",{class:"upload-text-secondary"}," æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæœ€å¤§ 10MB ",-1)),a[37]||(a[37]=r("div",{class:"upload-tips"},[r("div",{class:"tip-item"},"ğŸ’¡ ç¡®ä¿å›¾ç‰‡æ¸…æ™°å®Œæ•´"),r("div",{class:"tip-item"},"ğŸ’¡ åŒ…å«å®Œæ•´çš„äºŒç»´ç åŒºåŸŸ"),r("div",{class:"tip-item"},"ğŸ’¡ æ”¯æŒ Google / Microsoft Authenticator ç­‰æ ‡å‡†æ ¼å¼")],-1)),r("input",{ref_key:"qrFileInput",ref:Va,type:"file",accept:"image/*",style:{display:"none"},onChange:Aa},null,544)],34),a[38]||(a[38]=r("div",{style:{"margin-top":"16px",color:"#999","font-size":"13px","text-align":"left"}},[r("p",null,[r("strong",null,"ä½¿ç”¨æ–¹æ³•ï¼š")]),r("p",null,"â€¢ ç‚¹å‡»ä¸Šæ–¹åŒºåŸŸé€‰æ‹©å›¾ç‰‡"),r("p",null,"â€¢ æ‹–æ‹½å›¾ç‰‡åˆ°ä¸Šæ–¹åŒºåŸŸ"),r("p",null,"â€¢ å¤åˆ¶å›¾ç‰‡åæŒ‰ Ctrl+V ç²˜è´´"),r("p",null,"â€¢ ç³»ç»Ÿå°†è‡ªåŠ¨è§£æäºŒç»´ç å¹¶å¡«å……å¯†é’¥")],-1))])]),_:1},8,["visible","width"])])}}},[["__scopeId","data-v-5d3b5f94"]]);export{Ge as default};
