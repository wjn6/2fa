import{c as k}from"./index-e7daf545.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{r as u,o as D,d as l,e as S,f as C,g as t,h as s,w as e,M as m,t as c,l as N}from"./index-82da048e.js";const T={class:"dashboard"},B={class:"dashboard-header"},K={class:"update-time"},M={class:"stat-content"},V={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},A={class:"stat-info"},E={class:"stat-value"},I={class:"stat-content"},L={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},P={class:"stat-info"},U={class:"stat-value"},j={class:"stat-content"},q={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},F={class:"stat-info"},G={class:"stat-value"},H={class:"stat-content"},J={class:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},O={class:"stat-info"},Q={class:"stat-value"},R={__name:"Dashboard",setup(W){const n=u({}),i=u(!1),v=u("刚刚"),g=[{colKey:"name",title:"名称",width:200},{colKey:"issuer",title:"发行者",width:150},{colKey:"use_count",title:"使用次数",width:120,align:"center"}],f=async()=>{var _,a;i.value=!0;try{const o=await k.getStatistics();n.value=o.data.data||{},v.value=new Date().toLocaleTimeString("zh-CN",{hour12:!1})}catch(o){console.error("加载统计数据失败:",o),m.error(((a=(_=o.response)==null?void 0:_.data)==null?void 0:a.message)||"加载统计数据失败")}finally{i.value=!1}},h=async()=>{await f(),m.success("数据已刷新")};return D(()=>{f()}),(_,a)=>{const o=l("t-icon"),p=l("t-button"),b=l("t-space"),d=l("t-card"),r=l("t-col"),x=l("t-row"),w=l("t-table"),y=l("t-loading");return S(),C("div",T,[t("div",B,[a[1]||(a[1]=t("h1",null,"统计仪表盘",-1)),s(b,null,{default:e(()=>[t("span",K,"最后更新："+c(v.value),1),s(p,{variant:"outline",size:"small",onClick:h,loading:i.value},{icon:e(()=>[s(o,{name:"refresh"})]),default:e(()=>[a[0]||(a[0]=N(" 刷新 ",-1))]),_:1},8,["loading"])]),_:1})]),s(y,{loading:i.value,size:"large"},{default:e(()=>[s(x,{gutter:[16,16],class:"stats-row"},{default:e(()=>[s(r,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(d,{"hover-shadow":"",class:"stat-card"},{default:e(()=>[t("div",M,[t("div",V,[s(o,{name:"secured",size:"24px"})]),t("div",A,[a[2]||(a[2]=t("div",{class:"stat-label"},"密钥总数",-1)),t("div",E,c(n.value.totalSecrets||0),1)])])]),_:1})]),_:1}),s(r,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(d,{"hover-shadow":"",class:"stat-card"},{default:e(()=>[t("div",I,[t("div",L,[s(o,{name:"folder",size:"24px"})]),t("div",P,[a[3]||(a[3]=t("div",{class:"stat-label"},"分类总数",-1)),t("div",U,c(n.value.totalCategories||0),1)])])]),_:1})]),_:1}),s(r,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(d,{"hover-shadow":"",class:"stat-card"},{default:e(()=>[t("div",j,[t("div",q,[s(o,{name:"discount",size:"24px"})]),t("div",F,[a[4]||(a[4]=t("div",{class:"stat-label"},"标签总数",-1)),t("div",G,c(n.value.totalTags||0),1)])])]),_:1})]),_:1}),s(r,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(d,{"hover-shadow":"",class:"stat-card"},{default:e(()=>[t("div",H,[t("div",J,[s(o,{name:"user",size:"24px"})]),t("div",O,[a[5]||(a[5]=t("div",{class:"stat-label"},"用户总数",-1)),t("div",Q,c(n.value.totalUsers||0),1)])])]),_:1})]),_:1})]),_:1}),s(d,{title:"最常使用密钥",class:"table-card"},{default:e(()=>[s(w,{data:n.value.topSecrets||[],columns:g,"max-height":400,stripe:"",hover:"",empty:"暂无数据"},null,8,["data"])]),_:1})]),_:1},8,["loading"])])}}},$=z(R,[["__scopeId","data-v-3d1f6b29"]]);export{$ as default};
