import{c as a}from"./index-42d0e3ec.js";import{_ as e}from"./_plugin-vue_export-helper-1b428a4d.js";import{M as t}from"./ui-703c31fd.js";import{r as l,o as u,O as o,P as _,Q as n,Z as d,b as i,$ as c,E as r}from"./vendor-d600c78b.js";import"./utils-783a0963.js";import"./index-64ce2276.js";const s={class:"settings p-16"},m={style:{"margin-top":"16px"}},p=e({__name:"Settings",setup(e){const p=l({auto_backup_enabled:!1,auto_backup_interval:24,auto_lock_enabled:!0,auto_lock_timeout:15}),b=async()=>{try{await a.updateSettings({auto_backup_enabled:p.value.auto_backup_enabled.toString(),auto_backup_interval:p.value.auto_backup_interval.toString(),auto_lock_enabled:p.value.auto_lock_enabled.toString(),auto_lock_timeout:p.value.auto_lock_timeout.toString()}),t.success("保存成功")}catch(e){}};return u(()=>{(async()=>{var e,t,l,u;try{const o=(await a.getSettings()).data.data;p.value={auto_backup_enabled:"true"===(null==(e=o.auto_backup_enabled)?void 0:e.value),auto_backup_interval:parseInt((null==(t=o.auto_backup_interval)?void 0:t.value)||24),auto_lock_enabled:"true"===(null==(l=o.auto_lock_enabled)?void 0:l.value),auto_lock_timeout:parseInt((null==(u=o.auto_lock_timeout)?void 0:u.value)||15)}}catch(o){}})()}),(a,e)=>{const t=o("t-switch"),l=o("t-form-item"),u=o("t-input-number"),v=o("t-form"),k=o("t-card"),f=o("t-button");return _(),n("div",s,[e[5]||(e[5]=d("div",{class:"page-header"},[d("h1",null,"系统设置")],-1)),i(k,{title:"自动备份",style:{"margin-top":"24px"}},{default:c(()=>[i(v,null,{default:c(()=>[i(l,{label:"启用自动备份"},{default:c(()=>[i(t,{modelValue:p.value.auto_backup_enabled,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value.auto_backup_enabled=a)},null,8,["modelValue"])]),_:1}),i(l,{label:"备份间隔（小时）"},{default:c(()=>[i(u,{modelValue:p.value.auto_backup_interval,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value.auto_backup_interval=a),min:1,max:168},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(k,{title:"自动锁定",style:{"margin-top":"24px"}},{default:c(()=>[i(v,null,{default:c(()=>[i(l,{label:"启用自动锁定"},{default:c(()=>[i(t,{modelValue:p.value.auto_lock_enabled,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value.auto_lock_enabled=a)},null,8,["modelValue"])]),_:1}),i(l,{label:"锁定超时（分钟）"},{default:c(()=>[i(u,{modelValue:p.value.auto_lock_timeout,"onUpdate:modelValue":e[3]||(e[3]=a=>p.value.auto_lock_timeout=a),min:1,max:60},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),d("div",m,[i(f,{theme:"primary",onClick:b},{default:c(()=>[...e[4]||(e[4]=[r("保存设置",-1)])]),_:1})])])}}},[["__scopeId","data-v-39bd76e7"]]);export{p as default};
