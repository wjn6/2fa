import{c as a}from"./index-42d0e3ec.js";import{_ as s}from"./_plugin-vue_export-helper-1b428a4d.js";import{M as t}from"./ui-703c31fd.js";import{r as e,o as l,O as d,P as i,Q as o,Z as c,b as n,$ as r,a1 as u,E as v}from"./vendor-d600c78b.js";import"./utils-783a0963.js";import"./index-64ce2276.js";const f={class:"dashboard"},m={class:"dashboard-header"},g={class:"update-time"},h={class:"stat-content"},p={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},_={class:"stat-info"},b={class:"stat-value"},x={class:"stat-content"},w={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},y={class:"stat-info"},j={class:"stat-value"},z={class:"stat-content"},k={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},S={class:"stat-info"},C={class:"stat-value"},K={class:"stat-content"},D={class:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},T={class:"stat-info"},E={class:"stat-value"},I=s({__name:"Dashboard",setup(s){const I=e({}),L=e(!1),M=e("刚刚"),N=[{colKey:"name",title:"名称",width:200},{colKey:"issuer",title:"发行者",width:150},{colKey:"use_count",title:"使用次数",width:120,align:"center"}],O=async()=>{var s,e;L.value=!0;try{const s=await a.getStatistics();I.value=s.data.data||{},M.value=(new Date).toLocaleTimeString("zh-CN",{hour12:!1})}catch(l){t.error((null==(e=null==(s=l.response)?void 0:s.data)?void 0:e.message)||"加载统计数据失败")}finally{L.value=!1}},P=async()=>{await O(),t.success("数据已刷新")};return l(()=>{O()}),(a,s)=>{const t=d("t-icon"),e=d("t-button"),l=d("t-space"),O=d("t-card"),Q=d("t-col"),U=d("t-row"),Z=d("t-table"),$=d("t-loading");return i(),o("div",f,[c("div",m,[s[1]||(s[1]=c("h1",null,"统计仪表盘",-1)),n(l,null,{default:r(()=>[c("span",g,"最后更新："+u(M.value),1),n(e,{variant:"outline",size:"small",onClick:P,loading:L.value},{icon:r(()=>[n(t,{name:"refresh"})]),default:r(()=>[s[0]||(s[0]=v(" 刷新 ",-1))]),_:1},8,["loading"])]),_:1})]),n($,{loading:L.value,size:"large"},{default:r(()=>[n(U,{gutter:[16,16],class:"stats-row"},{default:r(()=>[n(Q,{xs:12,sm:12,md:6,lg:6,xl:6},{default:r(()=>[n(O,{"hover-shadow":"",class:"stat-card"},{default:r(()=>[c("div",h,[c("div",p,[n(t,{name:"secured",size:"24px"})]),c("div",_,[s[2]||(s[2]=c("div",{class:"stat-label"},"密钥总数",-1)),c("div",b,u(I.value.totalSecrets||0),1)])])]),_:1})]),_:1}),n(Q,{xs:12,sm:12,md:6,lg:6,xl:6},{default:r(()=>[n(O,{"hover-shadow":"",class:"stat-card"},{default:r(()=>[c("div",x,[c("div",w,[n(t,{name:"folder",size:"24px"})]),c("div",y,[s[3]||(s[3]=c("div",{class:"stat-label"},"分类总数",-1)),c("div",j,u(I.value.totalCategories||0),1)])])]),_:1})]),_:1}),n(Q,{xs:12,sm:12,md:6,lg:6,xl:6},{default:r(()=>[n(O,{"hover-shadow":"",class:"stat-card"},{default:r(()=>[c("div",z,[c("div",k,[n(t,{name:"discount",size:"24px"})]),c("div",S,[s[4]||(s[4]=c("div",{class:"stat-label"},"标签总数",-1)),c("div",C,u(I.value.totalTags||0),1)])])]),_:1})]),_:1}),n(Q,{xs:12,sm:12,md:6,lg:6,xl:6},{default:r(()=>[n(O,{"hover-shadow":"",class:"stat-card"},{default:r(()=>[c("div",K,[c("div",D,[n(t,{name:"user",size:"24px"})]),c("div",T,[s[5]||(s[5]=c("div",{class:"stat-label"},"用户总数",-1)),c("div",E,u(I.value.totalUsers||0),1)])])]),_:1})]),_:1})]),_:1}),n(O,{title:"最常使用密钥",class:"table-card"},{default:r(()=>[n(Z,{data:I.value.topSecrets||[],columns:N,"max-height":400,stripe:"",hover:"",empty:"暂无数据"},null,8,["data"])]),_:1})]),_:1},8,["loading"])])}}},[["__scopeId","data-v-3d1f6b29"]]);export{I as default};
